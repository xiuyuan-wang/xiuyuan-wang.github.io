<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="js,">





  <link rel="alternate" href="/atom.xml" title="倘若有一天" type="application/atom+xml">






<meta name="description" content="js处理的8种跨域方法">
<meta name="keywords" content="js">
<meta property="og:type" content="article">
<meta property="og:title" content="js处理的8种跨域方法">
<meta property="og:url" content="http://yoursite.com/post/2019-02-12-20190212/index.html">
<meta property="og:site_name" content="倘若有一天">
<meta property="og:description" content="js处理的8种跨域方法">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2020-03-11T09:28:24.308Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="js处理的8种跨域方法">
<meta name="twitter:description" content="js处理的8种跨域方法">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/post/2019-02-12-20190212/">





  <title>js处理的8种跨域方法 | 倘若有一天</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">倘若有一天</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">深夜狂奔</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/post/2019-02-12-20190212/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="笑余笙">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="倘若有一天">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">js处理的8种跨域方法</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-12T17:25:23+08:00">
                2019-02-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>js处理的8种跨域方法</p>
<a id="more"></a>

<p>这里说的js跨域是指通过js在不同的域之间进行数据传输或通信，比如用ajax向一个不同的域请求数据，或者通过js获取页面中不同域的框架中(iframe)的数据。只要协议、域名、端口有任何一个不同，都被当作是不同的域。</p>
<p>特别注意两点：</p>
<p>#1、如果是协议和端口造成的跨域问题“前台”是无能为力的； </p>
<p>#2、在跨域问题上，域仅仅是通过“URL的首部”来识别而不会去尝试判断相同的ip地址对应着两个域或两个域是否在同一个ip上。<br>要解决跨域的问题，我们可以使用以下几种方法：</p>
<h5 id="方法一、通过jsonp跨域"><a href="#方法一、通过jsonp跨域" class="headerlink" title="方法一、通过jsonp跨域"></a>方法一、通过jsonp跨域</h5><p>JSONP包含两部分：回调函数和数据。<br>回调函数：当响应到来时要放在当前页面被调用的函数。<br>数据：就是传入回调函数中的json数据，也就是回调函数的参数了。</p>
<pre><code>/*handleResonse({&quot;data&quot;: &quot;zhe&quot;})*/
//原理如下：
//当我们通过script标签请求时
//后台就会根据相应的参数(json,handleResponse)
//来生成相应的json数据(handleResponse({&quot;data&quot;: &quot;zhe&quot;}))
//最后这个返回的json数据(代码)就会被放在当前js文件中被执行
//至此跨域通信完成
//1、使用JS动态生成script标签，进行跨域操作
function handleResponse(response){
    console.log(&apos;The responsed data is: &apos;+response.data);
    //处理获得的Json数据
}
var script = document.createElement(&apos;script&apos;);
script.src = &apos;http://www.example.com/data/?callback=handleResponse&apos;;
document.body.insertBefore(script, document.body.firstChild);
--------------------------
//2、手动生成script标签
function handleResponse(response){
    console.log(&apos;The responsed data is: &apos;+response.data);
    //处理获得的Json数据
}
&lt;script src=&quot;http://www.example.com/data/?callback=handleResponse&quot;&gt;&lt;/script&gt;
--------------------------
//3、使用jQuery进行jsonp操作
//jquery会自动生成一个全局函数来替换callback=?中的问号，之后获取到数据后又会自动销毁
//$.getJSON方法会自动判断是否跨域，不跨域的话，就调用普通的ajax方法；跨域的话，则会以异步加载js文件的形式来调用jsonp的回调函数。
&lt;script&gt;
    $.getJson(&apos;http://www.example.com/data/?callback=?&apos;,function(jsondata){
    //处理获得的Json数据
});
&lt;/script&gt;</code></pre><p>jsonp虽然很简单，但是有如下缺点：</p>
<p>#1）安全问题(请求代码中可能存在安全隐患)</p>
<p>#2）要确定jsonp请求是否失败并不容易</p>
<h5 id="方法二、通过document-domain-iframe来跨子域-只有在主域相同的时候才能使用该方法"><a href="#方法二、通过document-domain-iframe来跨子域-只有在主域相同的时候才能使用该方法" class="headerlink" title="方法二、通过document.domain+iframe来跨子域(只有在主域相同的时候才能使用该方法)"></a>方法二、通过document.domain+iframe来跨子域(只有在主域相同的时候才能使用该方法)</h5><p>#（1）不能通过ajax的方法去请求不同源中的文档。</p>
<p>#（2）浏览器中不同域的框架之间是不能进行js的交互操作的。</p>
<p>所以，在不同的框架之间（父子或同辈），是能够获取到彼此的window对象的，但不能使用获取到的window对象的属性和方法(html5中的postMessage方法是一个例外)，总之，你可以当做是只能获取到一个几乎无用的window对象。 </p>
<p>　　例如，在一个页面 http:// <a href="http://www.example.com/a.html" target="_blank" rel="noopener">www.example.com/a.html</a> 中，有一个iframe框架它的src是http:// example.com/b.html, 很显然，这个页面与它里面的iframe框架是不同域的，所以我们是无法通过在页面中书写js代码来获取iframe中的东西的：</p>
<pre><code>//  http://www.example.com/a.html 页面中
 &lt;script&gt;
 function onLoad(){
     var iframe = document.getElementById(&apos;iframe&apos;);
     var win = iframe.contentWindow;
     //这里能够获取到iframe中的window对象，但是window对象的属性和方法几乎不可用。
     var doc = win.document;//这里获取不到iframe中的document对象
     var name = win.name;//这里获取不到window对象的name属性
     ······
 }
 &lt;iframe id = &quot;iframe&quot; src =&quot;http:// example.com/b.html&quot; onload = &quot;onLoad()&quot;&gt;&lt;/iframe&gt; </code></pre><p>所以我们就要用到document.domain</p>
<p>1) 在页面http:// <a href="http://www.a.com/dir/a.html中设置document.domain：" target="_blank" rel="noopener">www.a.com/dir/a.html中设置document.domain：</a></p>
<pre><code>1 &lt;iframe src = &quot;http://script.a.com/dir/b.html&quot; id=&quot;iframe&quot; onload = &quot;loLoad()&quot;&gt;&lt;/iframe&gt;
2 &lt;script&gt;
3 document.domain = &quot;a.com&quot;;//设置成主域
4 function test(){
5     var iframe = document.getElementById(&quot;iframe&quot;);
6     var win = iframe.contentWindow;
7     //在这里就可以操作b.html
8 }
9 &lt;/script&gt;</code></pre><p>2) 在http:// script.a.com/dir/b.html也需要显示的设置document.domain</p>
<pre><code>&lt;script&gt;
     document.domain = &quot;a.com&quot;;
&lt;/script&gt;</code></pre><p>注意，document.domain的设置是有限制的：</p>
<p>　　我们只能把document.domain设置成自身或更高一级的父域，且主域必须相同。<br>　　例如：a.b.c.com 中某个文档的document.domain 可以设成a.b.c.com、b.c.com 、c.com中的任意一个</p>
<h5 id="方法三、使用window-name-iframe来进行跨域"><a href="#方法三、使用window-name-iframe来进行跨域" class="headerlink" title="方法三、使用window.name+iframe来进行跨域"></a>方法三、使用window.name+iframe来进行跨域</h5><p>window的name属性特征：name 值在不同的页面（甚至不同域名）加载后依旧存在，并且可以支持非常长的 name 值（2MB），即在一个窗口(window)的生命周期内,窗口载入的所有的页面都是共享一个window.name的，每个页面window.name都有读写的权限。</p>
<p>　　正是由于window的name属性的特征，所以可以使用window.name来进行跨域。<br>　　举例：<br>　　1）在一个a.html页面中，有如下代码：</p>
<pre><code>&lt;script&gt;
    window.name = &quot;哈哈，我是页面a设置的值哟！&quot;;
    //设置window.name的值
    setTimeout(function(){
        window.location = &apos;b.html&apos;;
    },3000);//3秒后把一个新页面载入当前window
&lt;/script&gt;</code></pre><p>2）再在b.html中读取window.name的值：</p>
<pre><code>&lt;script&gt;
    alert(window.name);//读取window.name的值
&lt;/script&gt;</code></pre><p>3）a.html载入3秒后，跳转到b.html页面中，结果为  弹出框”哈哈，我是页面a设置的值哟！”</p>
<p>#注意： </p>
<p>#1.window.name的值只能是字符串的形式，这个字符串的大小最大能允许2M左右甚至更大的一个容量，具体取决于不同的浏览器。</p>
<p>接下来使用window.name进行跨域举例</p>
<p>　　比如：有一个example.com/a.html页面,需要通过a.html页面里的js来获取另一个位于不同域上的页面cnblogs.com/data.html里的数据。 </p>
<p>　　1)创建cnblogs.com/data.html代码：<br>        <script><br>             window.name = "我是data.html的数据，所有可以转化为字符串来传递的数据都可以在这里使用，比如这里可以传递Json数据";<br>        </script></p>
<p>2)创建example.com/a.html的代码：<br>    想要即使a.html页面不跳转也能得到data.html里的数据。在a.html页面中使用一个隐藏的iframe来充当一个中间人角色，由iframe去获取data.html的数据，然后a.html再去得到iframe获取到的数据。</p>
<pre><code>&lt;script&gt;
    function getData(){
    //iframe载入data.html页面会执行此函数
        var ifr = document.getElementById(&quot;iframe&quot;);
        ifr.onload = function(){
        //这个时候iframe和a.html已经处于同一源，可以互相访问
            var data = ifr.contentWindow.name;
//获取iframe中的window.name，也就是data.html中给它设置的数据
            alert(data);
        }
        ifr.src = &apos;b.html&apos;;//这里的b.html为随便一个页面，只要与a.html同源就行，目的是让a.html能够访问到iframe中的东西，否则访问不到
    }
&lt;/script&gt;
&lt;iframe id = &quot;iframe&quot; src = &quot;cnblogs.com/data.html&quot; style = &quot;display:none&quot; onload = &quot;getData()&quot;&gt;&lt;/iframe&gt;</code></pre><h5 id="方法四、使用window-postMessage方法来跨域-不常用"><a href="#方法四、使用window-postMessage方法来跨域-不常用" class="headerlink" title="方法四、使用window.postMessage方法来跨域(不常用)"></a>方法四、使用window.postMessage方法来跨域(不常用)</h5><p>window.postMessage(message,targetOrigin) 方法是html5新引进的特性，可以使用它来向其它的window对象发送消息，无论这个window对象是属于同源或不同源(可实现跨域)，目前IE8+、FireFox、Chrome、Opera等浏览器都已经支持window.postMessage方法。<br>　　message：为要发送的消息，类型只能为字符串；<br>　　targetOrigin：用来限定接收消息的那个window对象所在的域，如果不想限定域，可以使用通配符 “*”。</p>
<p>1)创建<a href="http://www.test.com/a.html页面代码：" target="_blank" rel="noopener">www.test.com/a.html页面代码：</a></p>
<pre><code>&lt;script&gt;
function onLoad(){
    var iframe = document.getElementById(&quot;iframe&quot;);
    var win = iframe.contentWindow;
    win.postMessage(&apos;哈哈，我是来自页面a.html的信息哟！&apos;,&apos;*&apos;);//向不同域的www.script.com/b.html发送消息
}
&lt;/script&gt;
&lt;iframe id=&quot;iframe&quot; src=&quot;www.script.com/b.html&quot; onload=&quot;onLoad()&quot;&gt;&lt;/iframe&gt;</code></pre><p>2)创建<a href="http://www.script.com/b.html页面代码：" target="_blank" rel="noopener">www.script.com/b.html页面代码：</a></p>
<pre><code>&lt;script&gt;
window.onmessage = function(e){//注册message时间来接收消息
    e = e || event;            //获取时间对象
    alert(e.data);             //通过data属性来得到传送的消息
}
&lt;/script&gt;</code></pre><p>优点：使用postMessage来跨域传送数据还是比较直观和方便的；<br>缺点： IE6、IE7不支持，所以用不用还得根据实际需要来决定。</p>
<h5 id="方法五、使用跨域资源共享（CORS）来跨域"><a href="#方法五、使用跨域资源共享（CORS）来跨域" class="headerlink" title="方法五、使用跨域资源共享（CORS）来跨域"></a>方法五、使用跨域资源共享（CORS）来跨域</h5><p>CORS：一种跨域访问的机制，可以让AJAX实现跨域访问；CORS允许一个域上的网络应用向另一个域提交跨域AJAX请求。<br>服务器设置Access-Control-Allow-Origin HTTP响应头之后，浏览器将会允许跨域请求．<br>就是使用自定义的HTTP头部让浏览器与服务器进行沟通，从而决定请求或响应是应该成功，还是应该失败。</p>
<p>1) IE中对CORS的实现是通过xdr</p>
<pre><code>var xdr = new XDomainRequest();
xdr.onload = function(){
    console.log(xdr.responseText);
}
xdr.open(&apos;get&apos;, &apos;http://www.test.com&apos;);
......
xdr.send(null);</code></pre><p>2) 其它浏览器中的实现就在xhr中</p>
<pre><code>var xhr =  new XMLHttpRequest();
xhr.onreadystatechange = function () {
if(xhr.readyState === 4 &amp;&amp; xhr.status === 200){
        console.log(xhr.responseText);
        } 
    }
}
xhr.open(&apos;get&apos;, &apos;http://www.test.com&apos;);
......
xhr.send(null);</code></pre><p>3) 实现跨浏览器的CORS</p>
<pre><code>function createCORS(method, url){
    var xhr = new XMLHttpRequest();
    if(&apos;withCredentials&apos; in xhr){
        xhr.open(method, url, true);
    }else if(typeof XDomainRequest != &apos;undefined&apos;){
        var xhr = new XDomainRequest();
        xhr.open(method, url);
    }else{
        xhr = null;
    }
    return xhr;
}
var request = createCORS(&apos;get&apos;, &apos;http://www.test.com&apos;);
if(request){
    request.onload = function(){
        ......
    };
    request.send();
}</code></pre><h5 id="方法六、使用location-hash-iframe来跨域（不常用）"><a href="#方法六、使用location-hash-iframe来跨域（不常用）" class="headerlink" title="方法六、使用location.hash+iframe来跨域（不常用）"></a>方法六、使用location.hash+iframe来跨域（不常用）</h5><p>假设域名test.com下的文件a.html要和csdnblogs.com域名下的b.html传递信息。<br>　　1) 创建test.com下的a.html页面， 同时在a.html上加一个定时器，隔一段时间来判断location.hash的值有没有变化，一旦有变化则获取获取hash值，代码如下：</p>
<pre><code>&lt;script&gt;
function startRequest(){
    var ifr = document.createElement(&apos;iframe&apos;);
    //创建一个隐藏的iframe
    ifr.style.display = &apos;none&apos;;
    ifr.src = &apos;http://www.csdnblogs.com/b.html#paramdo&apos;;
    //传递的location.hash 
    document.body.appendChild(ifr);
}

function checkHash() {
    try {
        var data = location.hash ? location.hash.substring(1):&apos;&apos;;
        if (console.log) {
            console.log(&apos;Now the data is &apos; + data);
        }
    } catch (e) {};
}
setInterval(checkHash, 5000);
window.onload = startRequest;
&lt;/script&gt;</code></pre><p> 2) b.html响应请求后再将通过修改a.html的hash值来传递数据，代码如下：      </p>
<pre><code>&lt;script&gt;
function checkHash() {
    var data = &apos;&apos;;
    //模拟一个简单的参数处理操作
    switch (location.hash) {
        case &apos;#paramdo&apos;:
            data = &apos;somedata&apos;;
            break;
        case &apos;#paramset&apos;:
            //do something……
            break;
        default:
            break;
    }
    data &amp;&amp; callBack(&apos;#&apos; + data);
}

function callBack(hash) {
    // ie、chrome的安全机制无法修改parent.location.hash
    //所以要利用一个中间的www.csdnblogs.com域下的代理iframe
    var proxy = document.createElement(&apos;iframe&apos;);
    proxy.style.display = &apos;none&apos;;
    proxy.src = &apos;http://www.csdnblogs.com/c.html&apos; + hash; 
    // 注意该文件在&quot;www.csdnblogs.com&quot;域下
    document.body.appendChild(proxy);
}
window.onload = checkHash;
&lt;/script&gt;</code></pre><p>3) test.com域下的c.html代码：</p>
<pre><code>&lt;script&gt;
 //因为parent.parent和自身属于同一个域，所以可以改变其location.hash的值
parent.parent.location.hash = self.location.hash.substring(1);
&lt;/script&gt;</code></pre><h5 id="方法七、使用Web-sockets来跨域"><a href="#方法七、使用Web-sockets来跨域" class="headerlink" title="方法七、使用Web sockets来跨域"></a>方法七、使用Web sockets来跨域</h5><p>web sockets： 是一种浏览器的API，它的目标是在一个单独的持久连接上提供全双工、双向通信。(同源策略对web sockets不适用)</p>
<p>web sockets原理：在JS创建了web socket之后，会有一个HTTP请求发送到浏览器以发起连接。取得服务器响应后，建立的连接会使用HTTP升级从HTTP协议交换为web sockt协议。</p>
<pre><code>&lt;script&gt;
var socket = new WebSockt(&apos;ws://www.test.com&apos;);
//http-&gt;ws; https-&gt;wss
socket.send(&apos;hello WebSockt&apos;);
socket.onmessage = function(event){
    var data = event.data;
}</code></pre><h5 id="方法八、使用flash-URLLoader来跨域"><a href="#方法八、使用flash-URLLoader来跨域" class="headerlink" title="方法八、使用flash URLLoader来跨域"></a>方法八、使用flash URLLoader来跨域</h5><p>flash有自己的一套安全策略，服务器可以通过crossdomain.xml文件来声明能被哪些域的SWF文件访问，SWF也可以通过API来确定自身能被哪些域的SWF加载。<br>例如：当跨域访问资源时，例如从域baidu.com请求域google.com上的数据，我们可以借助flash来发送HTTP请求。</p>
<p>跨域实现方式： 
　</p>
<p>#1. 首先，修改域google.com上的crossdomain.xml(一般存放在根目录，如果没有需要手动创建) ，把baidu.com加入到白名单。 </p>
<p>#2. 其次，通过Flash URLLoader发送HTTP请求 </p>
<p>#3. 最后，通过Flash API把响应结果传递给JavaScript。</p>
<p>Flash URLLoader是一种很普遍的跨域解决方案，不过需要支持iOS的话，这个方案就不可行了。 </p>
<p>以上八种方法，可以根据项目的实际情况来进行选择应用，个人认为window.name的方法既不复杂，也能兼容到几乎所有浏览器，这真是极好的一种跨域方法。</p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.png" alt="笑余笙 微信支付">
        <p>微信打赏</p>
      </div>
    

    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    笑余笙
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://yoursite.com/post/2019-02-12-20190212/" title="js处理的8种跨域方法">http://yoursite.com/post/2019-02-12-20190212/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    
    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
      
    </div>
    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/js/" rel="tag"><i class="fa fa-tag"></i> js</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/post/2019-02-01-20190201/" rel="next" title="JavaScript深入之继承的多种方式和优缺点">
                <i class="fa fa-chevron-left"></i> JavaScript深入之继承的多种方式和优缺点
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/post/2019-04-01-20190401/" rel="prev" title="vue源码分析 - observer,dep,watch实现数据双向绑定">
                vue源码分析 - observer,dep,watch实现数据双向绑定 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/header.jpg" alt="笑余笙">
            
              <p class="site-author-name" itemprop="name">笑余笙</p>
              <p class="site-description motion-element" itemprop="description">努力奔跑</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">29</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/xiuyuan-wang" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:15665259705@139.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://example.com/" title="Web前端导航" target="_blank">Web前端导航</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.36zhen.com/t?id=3448" title="前端书籍资料" target="_blank">前端书籍资料</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-5"><a class="nav-link" href="#方法一、通过jsonp跨域"><span class="nav-number">1.</span> <span class="nav-text">方法一、通过jsonp跨域</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方法二、通过document-domain-iframe来跨子域-只有在主域相同的时候才能使用该方法"><span class="nav-number">2.</span> <span class="nav-text">方法二、通过document.domain+iframe来跨子域(只有在主域相同的时候才能使用该方法)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方法三、使用window-name-iframe来进行跨域"><span class="nav-number">3.</span> <span class="nav-text">方法三、使用window.name+iframe来进行跨域</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方法四、使用window-postMessage方法来跨域-不常用"><span class="nav-number">4.</span> <span class="nav-text">方法四、使用window.postMessage方法来跨域(不常用)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方法五、使用跨域资源共享（CORS）来跨域"><span class="nav-number">5.</span> <span class="nav-text">方法五、使用跨域资源共享（CORS）来跨域</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方法六、使用location-hash-iframe来跨域（不常用）"><span class="nav-number">6.</span> <span class="nav-text">方法六、使用location.hash+iframe来跨域（不常用）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方法七、使用Web-sockets来跨域"><span class="nav-number">7.</span> <span class="nav-text">方法七、使用Web sockets来跨域</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方法八、使用flash-URLLoader来跨域"><span class="nav-number">8.</span> <span class="nav-text">方法八、使用flash URLLoader来跨域</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">笑余笙</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body>
</html>
