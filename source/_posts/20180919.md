---
title: vuex的state，actions，getters，mutations的使用
date: 2018-09-19 20:48:18
categories:
- vue
	- vuex
tags:
- vue
---

vuex的state，actions，getters，mutations的使用 分为两种情况，有module和没有mudule

<!-- more -->

##有module
###看getters，有四种写法

		<template>
		  <div>
		    <button @click="getUserName()">
		      点击获取用户名
		    </button>
		    <div>获取到的用户名：{{userName}}</div>
		  </div>
		</template>
		 
		<script>
		  import {mapGetters} from 'vuex'
		 
		  export default {
		    name: "login",
		    data: function () {
		      return {
		        userName: '',
		      }
		    },
		    methods:{
		      getUserName:function(){
		        /**
		         *  调用getters有四种方法
		         *  第一种：this.userName = this.gettersName ，需要在computed中写...mapGetters
		         *  第二种：this.userName = this['gettersName'] ，需要在computed中写...mapGetters
		         *  第三种：this.userName = this.$store.getters.gettersName，直接调用getters.js中的gettersName方法，不需要mapGetters
		         *  第四种：this.userName = this.$store.getters['gettersName']，直接调用getters.js中的gettersName方法，不需要mapGetters
		         */
		        console.log('没有module的getters：'+JSON.stringify(this.$store.getters))//{"gettersName":"111"}
		        this.userName = this.$store.getters['gettersName']
		      }
		    },
		    computed: {
		      ...mapGetters([
		        'gettersName'
		      ])
		    },
		  }
		</script>
		 
		<style scoped>
		 
		</style>

###actions有三种写法：

	<template>
	  <div>
	    <input type="number" v-model="userName" placeholder="请输入用户名" />
	    <div @click='loginClick()'> 登录</div>
	    <div>{{test}}</div>
	  </div>
	</template>
	 
	<script>
	  import { mapActions } from 'vuex'
	  export default {
	    name: "login",
	    data:function () {
	      return{
	        userName:'',
	      }
	    },
	    methods:{
	      ...mapActions([
	        'setActionName'
	      ]),
	 
	      loginClick:function () {
	        /**
	         *  调用actions有三种方法
	         *  第一种：this.setActionName(this.userName)，需要在methods中写...mapActions
	         *  第二种：this['setActionName'](this.userName)，需要在methods中写...mapActions
	         *  第三种：this.$store.dispatch('setActionName',this.userName)，直接调用actions.js中的setActionName方法，不需要mapActions
	         */
	        this.$store.dispatch('setActionName',this.userName)
	      },
	    },
	    computed:{
	      test(){
	        return this.$store.state.name;
	      }
	    }
	  }
	</script>
	 
	<style scoped>
	 
	</style>

###mutations有一种写法：

	<template>
	  <div>
	    <input type="number" v-model="userName" placeholder="请输入用户名" />
	    <button @click='loginClick()'> 登录</button>
	    <div>{{test}}</div>
	  </div>
	</template>
	 
	<script>
	  export default {
	    name: "login",
	    data:function () {
	      return{
	        userName:'',
	      }
	    },
	    methods:{
	      loginClick:function () {
	        /**
	         *  调用mutations有一种方法
	         *   this.$store.commit('setMutationName',this.userName)
	         */
	        this.$store.commit('setMutationName',this.userName)
	      },
	    },
	    computed:{
	      test(){
	        return this.$store.state.name;
	      }
	    }
	 
	  }
	</script>
	 
	<style scoped>
	 
	</style>


##state有四种写法：


	<template>
	  <div>
	    <button @click='loginClick()'> 获取用户名</button>
	    <div>获取到的用户名：{{userName}}</div>
	  </div>
	</template>
	 
	<script>
	  import { mapState } from 'vuex'
	  export default {
	    name: "login",
	    data:function () {
	      return{
	        userName:'',
	      }
	    },
	    methods:{
	      loginClick:function () {
	        /**
	         *  调用state有四种方法
	         *  第一种：this.userName = this.$store.state.name,不需要...mapstate
	         *  第二种：this.userName = this.$store.state['name'],不需要...mapstate
	         *  第三种：this.userName = this.getName，需要...mapstate
	         *  第四种：this.userName = this['getName']，需要...mapstate
	         */
	        console.log('没有module的state：'+JSON.stringify(this.$store.state))//{"name":"111"}
	        this.userName = this['getName']
	      },
	    },
	    computed:{
	      ...mapState({
	        getName: state => state.name,
	      }),
	    }
	  }
	</script>
	 
	<style scoped>
	 
	</style>

##再来看看有module的情况：

###接下来看看有module时getters的使用：getters有两种使用方法

	<template>
	  <div>
	    <button @click="getUserName()">
	      点击获取用户名
	    </button>
	    <div>获取到的用户名：{{userName}}</div>
	  </div>
	</template>
	 
	<script>
	  import {mapGetters} from 'vuex'
	 
	  export default {
	    name: "login",
	    data: function () {
	      return {
	        userName: '',
	      }
	    },
	    methods:{
	      getUserName:function(){
	        /**
	         *  调用getters有两种方法
	         *  第一种：this.userName = this['mod1/getUserName'] ，需要在computed中写...mapGetters
	         *  第二种：this.userName = this.$store.getters['mod1/getUserName']，直接调用gettersOne.js中的mod1的getUserName方法，不需要mapGetters
	         */
	        console.log('有module的getters：'+JSON.stringify(this.$store.getters))//{"getAddress":"西安市","mod1/getUserName":"testName","mod1/getUserNameTest":"testName"}
	        this.userName = this.$store.getters['mod1/getUserName'];
	      }
	    },
	    computed: {
	      ...mapGetters([
	        'mod1/getUserName'
	      ])
	    },
	  }
	</script>
	 
	<style scoped>
	 
	</style>

###有module的state：state有四种使用方法

	<template>
	  <div>
	    <button @click='loginClick()'> 获取用户名</button>
	    <div>获取到的用户名：{{userName}}</div>
	  </div>
	</template>
	 
	<script>
	  import { mapState } from 'vuex'
	  export default {
	    name: "login",
	    data:function () {
	      return{
	        userName:'',
	      }
	    },
	    methods:{
	      loginClick:function () {
	        /**
	         *  调用state有四种方法
	         *  第一种：this.userName = this.$store.state.mod1.userName,不需要...mapstate
	         *  第二种：this.userName = this.$store.state.mod1['userName'],不需要...mapstate
	         *  第三种：this.userName = this.getName，需要...mapstate
	         *  第四种：this.userName = this['getName']，需要...mapstate
	         */
	        console.log('==='+ JSON.stringify(this.$store.state))//{"address":"西安市","mod1":{"userName":"testName"}}
	        this.userName = this.getName
	      },
	    },
	    computed:{
	      ...mapState({
	        /**
	         * 下面的方法也可以写为
	         *  getName: function(state){
	              console.log(JSON.stringify(state))//{"address":"西安市","mod1":{"userName":"testName"}}
	              return  state.mod1.userName
	           }
	         * @param state
	         * @returns {*}
	         */
	        getName: state =>state.mod1.userName//或者getName: state =>state.mod1['userName']
	      }),
	    }
	  }
	</script>
	 
	<style scoped>
	 
	</style>

###有module的actions：action有两种使用方法

	<template>
	  <div>
	    <input type="number" v-model="userName" placeholder="请输入用户名" />
	    <div @click='loginClick()'> 登录</div>
	    <div>{{test}}</div>
	  </div>
	</template>
	 
	<script>
	  import { mapActions } from 'vuex'
	  export default {
	    name: "login",
	    data:function () {
	      return{
	        userName:'',
	      }
	    },
	    methods:{
	      ...mapActions([
	        'mod1/changeName'
	      ]),
	 
	      loginClick:function () {
	        /**
	         *  调用actions有两种方法
	         *  第一种：this['mod1/changeName'](this.userName)，需要在methods中写...mapActions
	         *  第二种：this.$store.dispatch('mod1/changeName',this.userName)，直接调用actions.js中的changeName方法，不需要mapActions
	         */
	        this['mod1/changeName'](this.userName)
	      },
	    },
	    computed:{
	      test(){
	        return this.$store.state.mod1.userName;
	      }
	    }
	  }
	</script>
	 
	<style scoped>
	 
	</style>


###有module的mutations：mutations有一种使用方法

	<template>
	  <div>
	    <input type="number" v-model="userName" placeholder="请输入用户名" />
	    <button @click='loginClick()'> 登录</button>
	    <div>{{test}}</div>
	  </div>
	</template>
	 
	<script>
	  export default {
	    name: "login",
	    data:function () {
	      return{
	        userName:'',
	      }
	    },
	    methods:{
	      loginClick:function () {
	        /**
	         *  调用mutations有一种方法
	         *   this.$store.commit('setName',this.userName)
	         */
	        this.$store.commit('mod1/setName',this.userName)
	      },
	    },
	    computed:{
	      test(){
	        return this.$store.state.mod1.userName;
	      }
	    }
	 
	  }
	</script>
	 
	<style scoped>
	 
	</style>