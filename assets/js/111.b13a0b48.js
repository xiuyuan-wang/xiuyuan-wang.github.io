(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{290:function(e,a,s){"use strict";s.r(a);var n=s(14),r=Object(n.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("经过前面几篇的努力，我们终于debug进了webpack源码中，"),a("br"),e._v("\n目前位置，位于 webpack/lib/Compiler.js 中，第198行，"),a("br"),e._v(" "),a("a",{attrs:{href:"https://github.com/webpack/webpack/blob/v4.20.2/lib/Compiler.js#L198",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/webpack/webpack/blob/v4.20.2/lib/Compiler.js#L198"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("本文我们要探索一下，webpack到底是怎样载入资源的，"),a("br"),e._v("\nbabel-loader在怎样被使用的。")]),e._v(" "),a("p",[e._v("一图胜千言，")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://images.weserv.nl/?url=upload-images.jianshu.io/upload_images/1023733-0fa9960ef70ba9bc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/503/format/webp",alt:""}})]),e._v(" "),a("p",[e._v("webpack（v4.20.2）"),a("br"),e._v("\nloader-runner（v2.3.1）"),a("br"),e._v("\nbabel-loader（v8.0.4）")]),e._v(" "),a("h3",{attrs:{id:"_1-webpack源码分析-v4-20-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-webpack源码分析-v4-20-2"}},[e._v("#")]),e._v(" 1. webpack源码分析（v4.20.2）")]),e._v(" "),a("h4",{attrs:{id:"_1-1-剧情回顾"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-剧情回顾"}},[e._v("#")]),e._v(" 1.1 剧情回顾")]),e._v(" "),a("p",[e._v("首先我们得回顾一下历史内容，"),a("br"),e._v("\n（1）我们先找到了 "),a("code",[e._v("npm run build")]),e._v(" 命令实际执行的Node.js代码"),a("br"),e._v("\n（2）然后分析代码，发现它动态"),a("code",[e._v("require")]),e._v(" 了所安装的CLI工具的地址"),a("br"),e._v("\n（3）通过"),a("code",[e._v("debug")]),e._v(" 模块写入日志，我们找到了CLI模块的源码"),a("br"),e._v("\n（4）最后分析CLI工具源码，发现它执行了webpack 模块的"),a("code",[e._v("compiler.run")])]),e._v(" "),a("p",[e._v("​调用链路如下，")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://images.weserv.nl/?url=upload-images.jianshu.io/upload_images/1023733-820f794227dc69f8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/487/format/webp",alt:""}})]),e._v(" "),a("p",[e._v("下面我们来看"),a("code",[e._v("run")]),e._v(" 方法。")]),e._v(" "),a("h4",{attrs:{id:"_1-2-compiler-run-方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-compiler-run-方法"}},[e._v("#")]),e._v(" 1.2 compiler.run 方法")]),e._v(" "),a("p",[e._v("它位于 "),a("a",{attrs:{href:"https://github.com/webpack/webpack/blob/v4.20.2/lib/Compiler.js#L198",target:"_blank",rel:"noopener noreferrer"}},[e._v("webpack/lib/Compiler.js 第198行"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("run(callback) {\n    ...\n    this.hooks.beforeRun.callAsync(this, err => {\n        ...\n        this.hooks.run.callAsync(this, err => {\n            ...\n            this.readRecords(err => {\n                ...\n                this.compile(onCompiled);\n            });\n        });\n    });\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br")])]),a("p",[a("code",[e._v("run")]),e._v(" 方法在"),a("a",{attrs:{href:"https://github.com/webpack/webpack/blob/v4.20.2/lib/Compiler.js#L268",target:"_blank",rel:"noopener noreferrer"}},[e._v("第268行"),a("OutboundLink")],1),e._v("调用了"),a("code",[e._v("this.compile")]),e._v("，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("this.compile(onCompiled);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"_1-2-compiler-compile方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-compiler-compile方法"}},[e._v("#")]),e._v(" 1.2 compiler.compile方法")]),e._v(" "),a("p",[a("code",[e._v("compile")]),e._v("方法是Compiler的实例方法，在"),a("a",{attrs:{href:"https://github.com/webpack/webpack/blob/v4.20.2/lib/Compiler.js#L527",target:"_blank",rel:"noopener noreferrer"}},[e._v("第527行"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("compile(callback) {\n    ...\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("然后在"),a("a",{attrs:{href:"https://github.com/webpack/webpack/blob/v4.20.2/lib/Compiler.js#L536",target:"_blank",rel:"noopener noreferrer"}},[e._v("第536行"),a("OutboundLink")],1),e._v("，调用了"),a("code",[e._v("this.hooks.make.callAsync")]),e._v("，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("this.hooks.make.callAsync(compilation, err => {\n    ...\n});\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h4",{attrs:{id:"_1-3-hooks-make"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-hooks-make"}},[e._v("#")]),e._v(" 1.3 hooks.make")]),e._v(" "),a("p",[e._v("关于hooks的解析，我准备放在下一篇，"),a("br"),e._v("\n这里我们需要知道的是，"),a("br"),e._v(" "),a("code",[e._v("this.hooks.make.callAsync")]),e._v("调用的是某个插件中实现的"),a("code",[e._v("hooks.make.tapAsync")]),e._v("方法。")]),e._v(" "),a("p",[e._v("hooks提供了一种"),a("strong",[e._v("能力")]),e._v("，解耦了该hooks的"),a("strong",[e._v("调用者")]),e._v("和"),a("strong",[e._v("实现方式")]),e._v("。"),a("br"),e._v("\n我们可以认为代码从调用hooks的地方，直接"),a("code",[e._v("goto")]),e._v("到了具体实现那里。")]),e._v(" "),a("p",[e._v("通过在webpack源码中进行搜索，我们找到了"),a("code",[e._v("hooks.make")]),e._v("的具体实现。"),a("br"),e._v(" "),a("strong",[e._v("注：")]),e._v(" 实现可能不止一处，webpack会加入队列中按顺序执行。")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('compiler.hooks.make.tapAsync(\n    "SingleEntryPlugin",\n    (compilation, callback) => {\n        const { entry, name, context } = this;\n\n        const dep = SingleEntryPlugin.createDependency(entry, name);\n        compilation.addEntry(context, dep, name, callback);\n    }\n);\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br")])]),a("p",[e._v("它的位置在这里，"),a("a",{attrs:{href:"https://github.com/webpack/webpack/blob/v4.20.2/lib/SingleEntryPlugin.js#L40",target:"_blank",rel:"noopener noreferrer"}},[e._v("webpack/lib/SingleEntryPlugin.js 第40行"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("p",[e._v("其中"),a("code",[e._v("compiler.hooks.make.tapAsync")]),e._v("的第一个参数"),a("code",[e._v('"SingleEntryPlugin"')]),e._v("只是一个名字。"),a("br"),e._v("\nhooks的具体实现是它的第二个参数，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("(compilation, callback) => {\n    ...\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("在这个hooks中，我们看到它调用了"),a("code",[e._v("compilation.addEntry")]),e._v("。"),a("br"),e._v("\n日志信息如下，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("debug-webpack webpack webpack.js cliPath: ~/Test/debug-webpack/node_modules/_webpack-cli@3.1.2@webpack-cli/bin/cli.js +0ms\ndebug-webpack webpack-cli cli.js start: compiler.run +0ms\ndebug-webpack webpack Compiler.js start: this.hooks.make.callAsync +0ms\ndebug-webpack webpack SingleEntryPlugin.js in: compiler.hooks.make.tapAsync +0ms\ndebug-webpack webpack SingleEntryPlugin.js start: compilation.addEntry +0ms\n...\ndebug-webpack webpack Compiler.js end: this.hooks.make.callAsync +397ms\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("其中，我们在每个函数的调用之前，加入了"),a("code",[e._v("start: xxx")]),e._v("，"),a("br"),e._v("\n然后在函数内第一行加入了"),a("code",[e._v("in: xxx")]),e._v("，"),a("br"),e._v("\n再函数的回调函数中，加入了"),a("code",[e._v("end: xxx")]),e._v("。")]),e._v(" "),a("p",[a("strong",[e._v("（1）Compiler.js compile方法内部")])]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("log('start: this.hooks.make.callAsync');\nthis.hooks.make.callAsync(compilation, err => {\n    log('end: this.hooks.make.callAsync');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[a("strong",[e._v("（2）SingleEntryPlugin.js apply方法内部")])]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("compiler.hooks.make.tapAsync(\n    \"SingleEntryPlugin\",\n    (compilation, callback) => {\n        log('in: compiler.hooks.make.tapAsync');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("h4",{attrs:{id:"_1-4-compilation-addentry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-compilation-addentry"}},[e._v("#")]),e._v(" 1.4 compilation.addEntry")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://images.weserv.nl/?url=upload-images.jianshu.io/upload_images/1023733-cf67ce388797b0a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/487/format/webp",alt:""}})]),e._v(" "),a("p",[e._v("好了，目前为止，如图所示，"),a("br"),e._v("\n（1）"),a("code",[e._v("compiler.run")]),e._v("调用了"),a("code",[e._v("hooks.make")]),e._v("，"),a("br"),e._v("\n（2）"),a("code",[e._v("hooks.make")]),e._v("调用了"),a("code",[e._v("compilation.addEntry")]),e._v("。")]),e._v(" "),a("p",[e._v("而"),a("code",[e._v("compilation.addEntry")]),e._v("是Compilation对象的"),a("code",[e._v("addEntry")]),e._v("实例方法，"),a("br"),e._v("\n它位于"),a("a",{attrs:{href:"https://github.com/webpack/webpack/blob/v4.20.2/lib/Compilation.js#L1027",target:"_blank",rel:"noopener noreferrer"}},[e._v("webpack/lib/Compilation.js 第1027行"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("addEntry(context, entry, name, callback) {\n    ...\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("它内部调用了"),a("code",[e._v("this._addModuleChain")]),e._v("，"),a("br"),e._v("\n然后"),a("code",[e._v("_addModuleChain")]),e._v("调用了"),a("code",[e._v("moduleFactory.create")]),e._v("。"),a("br"),e._v(" "),a("code",[e._v("moduleFactory.create")]),e._v("会返回一个"),a("code",[e._v("module")]),e._v("对象，源码位于"),a("a",{attrs:{href:"https://github.com/webpack/webpack/blob/v4.20.2/lib/Compilation.js#L943",target:"_blank",rel:"noopener noreferrer"}},[e._v("第943行"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('moduleFactory.create(\n    {\n        contextInfo: {\n            issuer: "",\n            compiler: this.compiler.name\n        },\n        context: context,\n        dependencies: [dependency]\n    },\n    (err, module) => {\n        ...\n    });\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br")])]),a("h4",{attrs:{id:"_1-5-modulefactory-create"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-modulefactory-create"}},[e._v("#")]),e._v(" 1.5 moduleFactory.create")]),e._v(" "),a("p",[e._v("我们看到的很多webpack源码，都是使用"),a("strong",[e._v("回调方式")]),e._v("编写的。")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// 返回值方式\na = f(v);\n\n// 回调方式\nf(v, (a)=>{\n    ...\n});\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("在返回值方式中，我们用"),a("strong",[e._v("赋值语句")]),e._v("来接收函数的返回值。"),a("br"),e._v("\n而在回调方式中，我们直接调用f，然后在它"),a("strong",[e._v("回调函数的参数中")]),e._v("得到返回值。"),a("br"),e._v(" "),a("code",[e._v("moduleFactory.create")]),e._v(" 就是回调方式的一个例子。")]),e._v(" "),a("p",[e._v("它的回调函数参数"),a("code",[e._v("module")]),e._v("，代表了"),a("code",[e._v("moduleFactory.create")]),e._v(" 的返回值。"),a("br"),e._v("\n我们在"),a("code",[e._v("addEntry")]),e._v("和"),a("code",[e._v("moduleFactory.create")]),e._v("前后写入log，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('debug-webpack webpack webpack.js cliPath: ~/Test/debug-webpack/node_modules/_webpack-cli@3.1.2@webpack-cli/bin/cli.js +0ms\ndebug-webpack webpack-cli cli.js start: compiler.run +0ms\ndebug-webpack webpack Compiler.js start: this.hooks.make.callAsync +0ms\ndebug-webpack webpack SingleEntryPlugin.js in: compiler.hooks.make.tapAsync +0ms\ndebug-webpack webpack SingleEntryPlugin.js start: compilation.addEntry +0ms\ndebug-webpack webpack Compilation.js in: addEntry +0ms\ndebug-webpack webpack Compilation.js start: this._addModuleChain +1ms\ndebug-webpack webpack Compilation.js in: _addModuleChain +0ms\ndebug-webpack webpack Compilation.js start: moduleFactory.create +0ms\ndebug-webpack webpack Compilation.js end: moduleFactory.create +35ms\ndebug-webpack webpack Compilation.js module.resource: ~/Test/debug-webpack/src/index.js +0ms\ndebug-webpack webpack Compilation.js module.loaders: [{"options":{"presets":["@babel/preset-env"]},"ident":"ref--4","loader":"~/Test/debug-webpack/node_modules/_babel-loader@8.0.4@babel-loader/lib/index.js"}] +0ms\n...\ndebug-webpack webpack Compilation.js end: this._addModuleChain +0ms\ndebug-webpack webpack Compiler.js end: this.hooks.make.callAsync +254ms\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br")])]),a("p",[e._v("于是看到，"),a("code",[e._v("moduleFactory.create")]),e._v("完成后得到的"),a("code",[e._v("module")]),e._v("对象中，"),a("br"),e._v("\n包含了待webpack载入的资源地址"),a("code",[e._v("resource")]),e._v("和载入它所用的"),a("code",[e._v("loaders")]),e._v("。")]),e._v(" "),a("p",[e._v("即webpack即将使用以下loaders，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('[{"options":{"presets":["@babel/preset-env"]},"ident":"ref--4","loader":"~/Test/debug-webpack/node_modules/_babel-loader@8.0.4@babel-loader/lib/index.js"}]\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("载入这个文件，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("~/Test/debug-webpack/src/index.js\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("它正是我们"),a("a",{attrs:{href:"https://www.jianshu.com/p/2fa6562210ef",target:"_blank",rel:"noopener noreferrer"}},[e._v("debug-webpack"),a("OutboundLink")],1),e._v("工程（我们调试webpack用的测试工程）中的源代码文件"),a("code",[e._v("src/index.js")]),e._v("。")]),e._v(" "),a("h4",{attrs:{id:"_1-6-this-buildmodule-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-this-buildmodule-module"}},[e._v("#")]),e._v(" 1.6 this.buildModule(module...")]),e._v(" "),a("p",[e._v("得到了"),a("code",[e._v("module")]),e._v("对象之后，webpack使用了"),a("code",[e._v("this.buildModule")]),e._v("方法，"),a("a",{attrs:{href:"https://github.com/webpack/webpack/blob/v4.20.2/lib/Compilation.js#L996",target:"_blank",rel:"noopener noreferrer"}},[e._v("第996行"),a("OutboundLink")],1),e._v("，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("this.buildModule(module, false, null, null, err => {\n    if (err) {\n        this.semaphore.release();\n        return errorAndCallback(err);\n    }\n\n    if (currentProfile) {\n        const afterBuilding = Date.now();\n        currentProfile.building = afterBuilding - afterFactory;\n    }\n\n    this.semaphore.release();\n    afterBuild();\n});\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br")])]),a("p",[e._v("它会调用"),a("code",[e._v("module")]),e._v("对象自身的"),a("code",[e._v("build")]),e._v("方法。"),a("br"),e._v("\n这里跳的就比较远了，"),a("br"),e._v("\n代码跳转到了NormalModule.js中的"),a("code",[e._v("build")]),e._v("方法中，"),a("br"),e._v("\n源码位置位于，"),a("a",{attrs:{href:"https://github.com/webpack/webpack/blob/v4.20.2/lib/NormalModule.js#L396",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/webpack/webpack/blob/v4.20.2/lib/NormalModule.js#L396"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("最后"),a("code",[e._v("build")]),e._v("方法（通过"),a("code",[e._v("doBuild")]),e._v("）又调用了函数"),a("code",[e._v("runLoaders")]),e._v("。"),a("br"),e._v("\n日志信息如下，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('debug-webpack webpack webpack.js cliPath: ~/Test/debug-webpack/node_modules/_webpack-cli@3.1.2@webpack-cli/bin/cli.js +0ms\ndebug-webpack webpack-cli cli.js start: compiler.run +0ms\ndebug-webpack webpack Compiler.js start: this.hooks.make.callAsync +0ms\ndebug-webpack webpack SingleEntryPlugin.js in: compiler.hooks.make.tapAsync +0ms\ndebug-webpack webpack SingleEntryPlugin.js start: compilation.addEntry +0ms\ndebug-webpack webpack Compilation.js in: addEntry +0ms\ndebug-webpack webpack Compilation.js start: this._addModuleChain +1ms\ndebug-webpack webpack Compilation.js in: _addModuleChain +0ms\ndebug-webpack webpack Compilation.js start: moduleFactory.create +0ms\ndebug-webpack webpack Compilation.js end: moduleFactory.create +35ms\ndebug-webpack webpack Compilation.js module.resource: ~/Test/debug-webpack/src/index.js +0ms\ndebug-webpack webpack Compilation.js module.loaders: [{"options":{"presets":["@babel/preset-env"]},"ident":"ref--4","loader":"~/Test/debug-webpack/node_modules/_babel-loader@8.0.4@babel-loader/lib/index.js"}] +0ms\ndebug-webpack webpack Compilation.js start: this.buildModule +1ms\ndebug-webpack webpack Compilation.js in: buildModule +0ms\ndebug-webpack webpack Compilation.js start: module.build +0ms\ndebug-webpack webpack NormalModule.js in: build +0ms\ndebug-webpack webpack NormalModule.js start: this.doBuild +0ms\ndebug-webpack webpack NormalModule.js in: doBuild +1ms\ndebug-webpack webpack NormalModule.js start: runLoaders +0ms    <---- 进入loader-runner模块\n...\ndebug-webpack webpack NormalModule.js end: runLoaders +208ms\ndebug-webpack webpack NormalModule.js end: this.doBuild +1ms\ndebug-webpack webpack Compilation.js end: module.build +215ms\ndebug-webpack webpack Compilation.js end: this.buildModule +1ms\ndebug-webpack webpack Compilation.js end: this._addModuleChain +0ms\ndebug-webpack webpack Compiler.js end: this.hooks.make.callAsync +254ms\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br"),a("span",{staticClass:"line-number"},[e._v("25")]),a("br"),a("span",{staticClass:"line-number"},[e._v("26")]),a("br")])]),a("p",[a("code",[e._v("runLoaders")]),e._v("方法却不在webpack代码库中，"),a("br"),e._v("\n它是一个外部依赖，"),a("a",{attrs:{href:"https://github.com/webpack/loader-runner",target:"_blank",rel:"noopener noreferrer"}},[e._v("github: loader-runner"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("h4",{attrs:{id:"_2-loader-runner源码分析-v2-3-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-loader-runner源码分析-v2-3-1"}},[e._v("#")]),e._v(" 2. loader-runner源码分析（v2.3.1）")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://images.weserv.nl/?url=upload-images.jianshu.io/upload_images/1023733-59570e7759b7d489.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/496/format/webp",alt:""}})]),e._v(" "),a("p",[e._v("loader-runner由于涉及到了两个递归函数，"),a("code",[e._v("iteratePitchingLoaders")]),e._v("和"),a("code",[e._v("iterateNormalLoaders")]),e._v("，"),a("br"),e._v("\n因此显得比较繁琐。")]),e._v(" "),a("p",[e._v("我猜测，这里之所以用递归实现，是因为loader-runner不仅要加载单独的一个文件，"),a("br"),e._v("\n还要"),a("strong",[e._v("加载它依赖的文件")]),e._v("，因此是一个"),a("strong",[e._v("递归加载")]),e._v("过程。")]),e._v(" "),a("h4",{attrs:{id:"_2-1-入口文件路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-入口文件路径"}},[e._v("#")]),e._v(" 2.1 入口文件路径")]),e._v(" "),a("p",[e._v("由于loader-runner是在文件webpack/lib/NormalModule.js中首次加载的，"),a("br"),e._v("\n因此，loader-runner模块的本地路径在这里，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("~/Test/debug-webpack/node_modules/_webpack@4.20.2@webpack/node_modules/loader-runner\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("通过查看它的package.json文件中的"),a("code",[e._v("main")]),e._v("字段，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"main": "lib/LoaderRunner.js",\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("我们知道实际加载的文件是loader-runner/lib/LoaderRunner.js。"),a("br"),e._v("\n关于"),a("code",[e._v("main")]),e._v("字段我们可以查阅这里，"),a("a",{attrs:{href:"https://docs.npmjs.com/files/package.json#main",target:"_blank",rel:"noopener noreferrer"}},[e._v("package.json - main"),a("OutboundLink")],1)]),e._v(" "),a("h4",{attrs:{id:"_2-2-runloaders"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-runloaders"}},[e._v("#")]),e._v(" 2.2 runLoaders")]),e._v(" "),a("p",[e._v("在文件"),a("a",{attrs:{href:"https://github.com/webpack/loader-runner/blob/v2.3.1/lib/LoaderRunner.js#L242",target:"_blank",rel:"noopener noreferrer"}},[e._v("LoaderRunner.js 第242行"),a("OutboundLink")],1),e._v("，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("exports.runLoaders = function runLoaders(options, callback) {\n    ...\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("我们看到了"),a("code",[e._v("runLoaders")]),e._v("函数实现。")]),e._v(" "),a("p",[a("strong",[e._v("（1）loadLoader函数")]),a("br"),e._v("\nrunLoaders执行过程会分为两个环节，"),a("strong",[e._v("先载入loader")]),e._v("，"),a("br"),e._v("\n然后"),a("strong",[e._v("再使用loader加载文件")]),e._v("。")]),e._v(" "),a("p",[e._v("因此，"),a("code",[e._v("runLoaders")]),e._v("函数中，首先调用了"),a("code",[e._v("iteratePitchingLoaders")]),e._v("，"),a("br"),e._v(" "),a("code",[e._v("iteratePitchingLoaders")]),e._v("调用了loader-runner/lib/loadLoader.js文件中导出的"),a("code",[e._v("loadLoader")]),e._v("函数。")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("loadLoader(currentLoaderObject, function(err) {\n    ...\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("而loadLoader函数中，在"),a("a",{attrs:{href:"https://github.com/webpack/loader-runner/blob/v2.3.1/lib/loadLoader.js#L13",target:"_blank",rel:"noopener noreferrer"}},[e._v("第13行"),a("OutboundLink")],1),e._v("使用了"),a("code",[e._v("require")]),e._v("，载入了loader，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("var module = require(loader.path);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("strong",[e._v("（2）iteratePitchingLoaders递归")]),a("br"),e._v(" "),a("code",[e._v("loadLoader")]),e._v("执行完了之后，又会递归的调用"),a("code",[e._v("iteratePitchingLoaders")]),e._v("，位于"),a("a",{attrs:{href:"https://github.com/webpack/loader-runner/blob/v2.3.1/lib/LoaderRunner.js#L173",target:"_blank",rel:"noopener noreferrer"}},[e._v("第173行"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("if(!fn) return iteratePitchingLoaders(options, loaderContext, callback);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("然后又会递归调用一次，"),a("a",{attrs:{href:"https://github.com/webpack/loader-runner/blob/v2.3.1/lib/LoaderRunner.js#L165",target:"_blank",rel:"noopener noreferrer"}},[e._v("第165行"),a("OutboundLink")],1),e._v("，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("if(currentLoaderObject.pitchExecuted) {\n    loaderContext.loaderIndex++;\n    return iteratePitchingLoaders(options, loaderContext, callback);\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("最终，在"),a("code",[e._v("iteratePitchingLoaders")]),e._v("函数中，调用了"),a("code",[e._v("processResource")]),e._v("，位于"),a("a",{attrs:{href:"https://github.com/webpack/loader-runner/blob/v2.3.1/lib/LoaderRunner.js#L158",target:"_blank",rel:"noopener noreferrer"}},[e._v("第158行"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("return processResource(options, loaderContext, callback);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("strong",[e._v("（3）processResource函数")]),a("br"),e._v(" "),a("code",[e._v("processResource")]),e._v("函数在"),a("a",{attrs:{href:"https://github.com/webpack/loader-runner/blob/v2.3.1/lib/LoaderRunner.js#L202",target:"_blank",rel:"noopener noreferrer"}},[e._v("第202行"),a("OutboundLink")],1),e._v("调用了"),a("code",[e._v("iterateNormalLoaders")]),e._v("，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("iterateNormalLoaders(options, loaderContext, [buffer], callback);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("code",[e._v("iterateNormalLoaders")]),e._v("在"),a("a",{attrs:{href:"https://github.com/webpack/loader-runner/blob/v2.3.1/lib/LoaderRunner.js#L229",target:"_blank",rel:"noopener noreferrer"}},[e._v("第229行"),a("OutboundLink")],1),e._v("调用了"),a("code",[e._v("runSyncOrAsync")]),e._v("。")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("runSyncOrAsync(fn, loaderContext, args, function(err) {\n    ...\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[a("strong",[e._v("（4）runSyncOrAsync函数")]),a("br"),e._v("\n该函数执行"),a("code",[e._v("runLoaders")]),e._v("的后半部分逻辑，即使用loader载入用户的源码文件。"),a("br"),e._v("\n我们看到，它在"),a("a",{attrs:{href:"https://github.com/webpack/loader-runner/blob/v2.3.1/lib/LoaderRunner.js#L118",target:"_blank",rel:"noopener noreferrer"}},[e._v("第118行"),a("OutboundLink")],1),e._v("调用了"),a("code",[e._v("LOADER_EXECUTION")]),e._v("函数，来完成操作。")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("var result = (function LOADER_EXECUTION() {\n    return fn.apply(context, args);\n}());\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("webpack loader实际上是一个导出的一个函数，这里的"),a("code",[e._v("fn")]),e._v("就是那个loader函数。")]),e._v(" "),a("p",[a("strong",[e._v("注：")]),a("br"),e._v(" "),a("code",[e._v("LOADER_EXECUTION")]),e._v("实际上是一个异步函数，"),a("br"),e._v(" "),a("code",[e._v("fn")]),e._v("中会通过调用"),a("code",[e._v("this.async()")]),e._v("得到一个callback函数，见"),a("a",{attrs:{href:"https://github.com/babel/babel-loader/blob/v8.0.4/src/index.js#L44",target:"_blank",rel:"noopener noreferrer"}},[e._v("babel-loader/src/index.js 第44行"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const callback = this.async();\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("而这个"),a("code",[e._v("this")]),e._v("就是"),a("code",[e._v("fn.apply(context, args)")]),e._v("中的"),a("code",[e._v("context")]),e._v("，"),a("br"),e._v("\n它的"),a("code",[e._v("async")]),e._v("方法位于，"),a("a",{attrs:{href:"https://github.com/webpack/loader-runner/blob/v2.3.1/lib/LoaderRunner.js#L95",target:"_blank",rel:"noopener noreferrer"}},[e._v("loader-runner/lib/LoaderRunner.js 第95行"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("context.async = function async() {\n    ...\n    return innerCallback;\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("因此，"),a("code",[e._v("end: LOADER_EXECUTION")]),e._v("日志需要写到该函数返回的callback中，"),a("br"),e._v("\n即，"),a("a",{attrs:{href:"https://github.com/webpack/loader-runner/blob/v2.3.1/lib/LoaderRunner.js#L103",target:"_blank",rel:"noopener noreferrer"}},[e._v("loader-runner/lib/LoaderRunner.js 第103行"),a("OutboundLink")],1),e._v(" "),a("code",[e._v("innerCallback")]),e._v("函数里。")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("var innerCallback = context.callback = function() {\n    log('end: LOADER_EXECUTION');\n    ...\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[a("strong",[e._v("（5）iterateNormalLoaders递归")]),a("br"),e._v("\n值得注意的是"),a("code",[e._v("iterateNormalLoaders")]),e._v("也是一个递归函数，"),a("br"),e._v(" "),a("code",[e._v("runSyncOrAsync")]),e._v("执行完之后，会在"),a("a",{attrs:{href:"https://github.com/webpack/loader-runner/blob/v2.3.1/lib/LoaderRunner.js#L233",target:"_blank",rel:"noopener noreferrer"}},[e._v("第233行"),a("OutboundLink")],1),e._v("递归调用"),a("code",[e._v("iterateNormalLoaders")]),e._v("，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("iterateNormalLoaders(options, loaderContext, args, callback);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("然后，进入"),a("code",[e._v("iterateNormalLoaders")]),e._v("函数后，又会在"),a("a",{attrs:{href:"https://github.com/webpack/loader-runner/blob/v2.3.1/lib/LoaderRunner.js#L218",target:"_blank",rel:"noopener noreferrer"}},[e._v("第218行"),a("OutboundLink")],1),e._v("再次递归调用"),a("code",[e._v("iterateNormalLoaders")]),e._v("。")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("return iterateNormalLoaders(options, loaderContext, args, callback);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("最终loader-runner调用了babel-loader完成了用户源码的转换操作。")]),e._v(" "),a("h4",{attrs:{id:"_2-3-日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-日志"}},[e._v("#")]),e._v(" 2.3 日志")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("debug-webpack webpack NormalModule.js start: runLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js in: runLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js start: iteratePitchingLoaders +1ms\ndebug-webpack loader-runner LoaderRunner.js in: iteratePitchingLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js start: loadLoader +0ms\ndebug-webpack loader-runner loadLoader.js in: loadLoader +0ms\ndebug-webpack loader-runner loadLoader.js loader.path: ~/Test/debug-webpack/node_modules/_babel-loader@8.0.4@babel-loader/lib/index.js +0ms\ndebug-webpack loader-runner LoaderRunner.js end: loadLoader +61ms         <---- 1. 完成加载loader\ndebug-webpack loader-runner LoaderRunner.js start: 1. iteratePitchingLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js in: iteratePitchingLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js start: 2. iteratePitchingLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js in: iteratePitchingLoaders +1ms\ndebug-webpack loader-runner LoaderRunner.js start: processResource +0ms\ndebug-webpack loader-runner LoaderRunner.js in: processResource +0ms\ndebug-webpack loader-runner LoaderRunner.js start: iterateNormalLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js in: iterateNormalLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js start: runSyncOrAsync +1ms\ndebug-webpack loader-runner LoaderRunner.js in: runSyncOrAsync +0ms\ndebug-webpack loader-runner LoaderRunner.js start: LOADER_EXECUTION +0ms\n...\ndebug-webpack loader-runner LoaderRunner.js in: async +0ms\ndebug-webpack loader-runner LoaderRunner.js in: innerCallback +264ms\ndebug-webpack loader-runner LoaderRunner.js end: LOADER_EXECUTION +0ms    <---- 2. 完成用loader载入文件\ndebug-webpack loader-runner LoaderRunner.js end: runSyncOrAsync +0ms\ndebug-webpack loader-runner LoaderRunner.js start: 1. iterateNormalLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js in: iterateNormalLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js start: 2. iterateNormalLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js in: iterateNormalLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js end: iteratePitchingLoaders +0ms\ndebug-webpack webpack NormalModule.js end: runLoaders +328ms\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br"),a("span",{staticClass:"line-number"},[e._v("25")]),a("br"),a("span",{staticClass:"line-number"},[e._v("26")]),a("br"),a("span",{staticClass:"line-number"},[e._v("27")]),a("br"),a("span",{staticClass:"line-number"},[e._v("28")]),a("br"),a("span",{staticClass:"line-number"},[e._v("29")]),a("br"),a("span",{staticClass:"line-number"},[e._v("30")]),a("br")])]),a("h3",{attrs:{id:"_3-babel源码分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-babel源码分析"}},[e._v("#")]),e._v(" 3. babel源码分析")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://images.weserv.nl/?url=upload-images.jianshu.io/upload_images/1023733-b37b67cbc502b4d3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/503/format/webp",alt:""}})]),e._v(" "),a("h4",{attrs:{id:"_3-1-babel-loader-v8-0-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-babel-loader-v8-0-4"}},[e._v("#")]),e._v(" 3.1 babel-loader（v8.0.4）")]),e._v(" "),a("p",[e._v("在上一节的日志中，我们看到载入的loader文件地址为，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("~/Test/debug-webpack/node_modules/_babel-loader@8.0.4@babel-loader/lib/index.js\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("位于我们"),a("a",{attrs:{href:"https://www.jianshu.com/p/2fa6562210ef",target:"_blank",rel:"noopener noreferrer"}},[e._v("debug-webpack"),a("OutboundLink")],1),e._v("工程目录的node_modules文件夹中。")]),e._v(" "),a("p",[e._v("注意由于node_modules中的babel-loader不包含src目录，是"),a("strong",[e._v("编译后的结果")]),e._v("，"),a("br"),e._v("\n我们可以从github仓库中找到源码，"),a("a",{attrs:{href:"https://github.com/babel/babel-loader/blob/v8.0.4/src/index.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("babel-loader/src/index.js"),a("OutboundLink")],1),e._v("。"),a("br"),e._v("\n这里我们需要在编译后的结果中进行debug。")]),e._v(" "),a("p",[e._v("我们看到，在"),a("a",{attrs:{href:"https://github.com/babel/babel-loader/blob/v8.0.4/src/index.js#L198",target:"_blank",rel:"noopener noreferrer"}},[e._v("babel-loader/lib/index.js 第198行"),a("OutboundLink")],1),e._v("，loader调用了"),a("code",[e._v("transform")]),e._v("函数，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("result = await transform(source, options);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("该"),a("code",[e._v("transform")]),e._v("函数是由"),a("a",{attrs:{href:"https://github.com/babel/babel-loader/blob/v8.0.4/src/transform.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("babel-loader/lib/transform.js"),a("OutboundLink")],1),e._v("导出的，"),a("br"),e._v("\n其中调用了"),a("a",{attrs:{href:"https://github.com/babel/babel/tree/v7.1.2/packages/babel-core",target:"_blank",rel:"noopener noreferrer"}},[e._v("@babel/core"),a("OutboundLink")],1),e._v("模块导出对象的"),a("code",[e._v("transform")]),e._v("方法。")]),e._v(" "),a("p",[a("strong",[e._v("注：")]),e._v(" 其中"),a("code",[e._v("source")]),e._v("的值就是源文件中的内容，例如，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const a = 1;\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("code",[e._v("result")]),e._v("是如下这样的对象，"),a("code",[e._v("result.code")]),e._v("字段中包含了转换后的代码（"),a("strong",[e._v("而不是AST")]),e._v("），")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{\n    "ast": null,\n    "code": "var a = 1;",\n    "map": null,\n    "metadata": {},\n    "sourceType": "module"\n}\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("h4",{attrs:{id:"_3-2-babel-core-v7-1-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-babel-core-v7-1-2"}},[e._v("#")]),e._v(" 3.2 @babel/core（v7.1.2）")]),e._v(" "),a("p",[e._v("导入的模块位于，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("~/Test/debug-webpack/node_modules/_@babel_core@7.1.2@@babel/core/\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("通过查看模块的package.json的"),a("code",[e._v("main")]),e._v("字段，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"main": "lib/index.js",\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("我们得知实际加载的文件是，")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("~/Test/debug-webpack/node_modules/_@babel_core@7.1.2@@babel/core/lib/index.js\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("babel内部的"),a("code",[e._v("transform")]),e._v("过程，这里暂且略过。")]),e._v(" "),a("h4",{attrs:{id:"_3-3-日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-日志"}},[e._v("#")]),e._v(" 3.3 日志")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('debug-webpack loader-runner LoaderRunner.js start: LOADER_EXECUTION +0ms\ndebug-webpack loader-runner LoaderRunner.js in: async +0ms\ndebug-webpack babel-loader index.js in: loader +0ms\ndebug-webpack babel-loader index.js this.resourcePath: ~/Test/debug-webpack/src/index.js +0ms\ndebug-webpack babel-loader index.js start: transform +185ms\ndebug-webpack babel-loader index.js source: alert(); +0ms\ndebug-webpack babel-loader index.js end: transform +77ms\ndebug-webpack babel-loader index.js result: {"ast":null,"code":"alert();","map":null,"metadata":{},"sourceType":"module"} +0ms\ndebug-webpack loader-runner LoaderRunner.js in: innerCallback +264ms\ndebug-webpack loader-runner LoaderRunner.js end: LOADER_EXECUTION +0ms\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br")])]),a("h3",{attrs:{id:"_4-回顾"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-回顾"}},[e._v("#")]),e._v(" 4. 回顾")]),e._v(" "),a("p",[e._v("从webpack-cli经历webpack，到loader-runner，最后到babel-loader的调用链路如下，")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://images.weserv.nl/?url=upload-images.jianshu.io/upload_images/1023733-de5b4769fbd8894b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/503/format/webp",alt:""}})]),e._v(" "),a("p",[e._v("整个webpack打包过程，总过涉及了这几层调用，"),a("br"),e._v("\n（1）webpack-cli"),a("br"),e._v("\n（2）webpack"),a("br"),e._v("\n（3）loader-runner"),a("br"),e._v("\n（4）babel-loader")]),e._v(" "),a("p",[e._v("webpack-cli调用webpack完成打包工作，"),a("br"),e._v("\nwebpack，调用loader-runner，加载loader，然后用loader加载用户代码，"),a("br"),e._v("\n当前我们的例子中，用到了babel-loader，因此，加载用户代码时调用了babel-loader。")]),e._v(" "),a("p",[e._v("**")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('debug-webpack webpack webpack.js cliPath: ~/Test/debug-webpack/node_modules/_webpack-cli@3.1.2@webpack-cli/bin/cli.js +0ms\n\ndebug-webpack webpack-cli cli.js start: compiler.run +0ms\n\ndebug-webpack webpack Compiler.js start: this.hooks.make.callAsync +0ms\ndebug-webpack webpack SingleEntryPlugin.js in: compiler.hooks.make.tapAsync +0ms\ndebug-webpack webpack SingleEntryPlugin.js start: compilation.addEntry +1ms\ndebug-webpack webpack Compilation.js in: addEntry +0ms\ndebug-webpack webpack Compilation.js start: this._addModuleChain +0ms\ndebug-webpack webpack Compilation.js in: _addModuleChain +0ms\ndebug-webpack webpack Compilation.js start: moduleFactory.create +0ms\ndebug-webpack webpack Compilation.js end: moduleFactory.create +65ms\ndebug-webpack webpack Compilation.js module.resource: ~/Test/debug-webpack/src/index.js +0ms\ndebug-webpack webpack Compilation.js module.loaders: [{"options":{"presets":["@babel/preset-env"]},"ident":"ref--4","loader":"~/Test/debug-webpack/node_modules/_babel-loader@8.0.4@babel-loader/lib/index.js"}] +0ms\ndebug-webpack webpack Compilation.js start: this.buildModule +1ms\ndebug-webpack webpack Compilation.js in: buildModule +0ms\ndebug-webpack webpack Compilation.js start: module.build +0ms\ndebug-webpack webpack NormalModule.js in: build +0ms\ndebug-webpack webpack NormalModule.js start: this.doBuild +0ms\ndebug-webpack webpack NormalModule.js in: doBuild +1ms\ndebug-webpack webpack NormalModule.js start: runLoaders +0ms\n\ndebug-webpack loader-runner LoaderRunner.js in: runLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js start: iteratePitchingLoaders +1ms\ndebug-webpack loader-runner LoaderRunner.js in: iteratePitchingLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js start: loadLoader +0ms\ndebug-webpack loader-runner loadLoader.js in: loadLoader +0ms\ndebug-webpack loader-runner loadLoader.js loader.path: ~/Test/debug-webpack/node_modules/_babel-loader@8.0.4@babel-loader/lib/index.js +0ms\ndebug-webpack loader-runner LoaderRunner.js end: loadLoader +61ms\ndebug-webpack loader-runner LoaderRunner.js start: 1. iteratePitchingLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js in: iteratePitchingLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js start: 2. iteratePitchingLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js in: iteratePitchingLoaders +1ms\ndebug-webpack loader-runner LoaderRunner.js start: processResource +0ms\ndebug-webpack loader-runner LoaderRunner.js in: processResource +0ms\ndebug-webpack loader-runner LoaderRunner.js start: iterateNormalLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js in: iterateNormalLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js start: runSyncOrAsync +1ms\ndebug-webpack loader-runner LoaderRunner.js in: runSyncOrAsync +0ms\ndebug-webpack loader-runner LoaderRunner.js start: LOADER_EXECUTION +0ms\ndebug-webpack loader-runner LoaderRunner.js in: async +0ms\n\ndebug-webpack babel-loader index.js in: loader +0ms\ndebug-webpack babel-loader index.js this.resourcePath: ~/Test/debug-webpack/src/index.js +0ms\ndebug-webpack babel-loader index.js start: transform +185ms\ndebug-webpack babel-loader index.js source: alert(); +0ms\ndebug-webpack babel-loader index.js end: transform +77ms\ndebug-webpack babel-loader index.js result: {"ast":null,"code":"alert();","map":null,"metadata":{},"sourceType":"module"} +0ms\n\ndebug-webpack loader-runner LoaderRunner.js in: innerCallback +264ms\ndebug-webpack loader-runner LoaderRunner.js end: LOADER_EXECUTION +0ms\ndebug-webpack loader-runner LoaderRunner.js end: runSyncOrAsync +0ms\ndebug-webpack loader-runner LoaderRunner.js start: 1. iterateNormalLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js in: iterateNormalLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js start: 2. iterateNormalLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js in: iterateNormalLoaders +0ms\ndebug-webpack loader-runner LoaderRunner.js end: iteratePitchingLoaders +0ms\n\ndebug-webpack webpack NormalModule.js end: runLoaders +328ms\ndebug-webpack webpack NormalModule.js end: this.doBuild +0ms\ndebug-webpack webpack Compilation.js end: module.build +339ms\ndebug-webpack webpack Compilation.js end: this.buildModule +0ms\ndebug-webpack webpack Compilation.js end: this._addModuleChain +1ms\ndebug-webpack webpack Compiler.js end: this.hooks.make.callAsync +407ms\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br"),a("span",{staticClass:"line-number"},[e._v("25")]),a("br"),a("span",{staticClass:"line-number"},[e._v("26")]),a("br"),a("span",{staticClass:"line-number"},[e._v("27")]),a("br"),a("span",{staticClass:"line-number"},[e._v("28")]),a("br"),a("span",{staticClass:"line-number"},[e._v("29")]),a("br"),a("span",{staticClass:"line-number"},[e._v("30")]),a("br"),a("span",{staticClass:"line-number"},[e._v("31")]),a("br"),a("span",{staticClass:"line-number"},[e._v("32")]),a("br"),a("span",{staticClass:"line-number"},[e._v("33")]),a("br"),a("span",{staticClass:"line-number"},[e._v("34")]),a("br"),a("span",{staticClass:"line-number"},[e._v("35")]),a("br"),a("span",{staticClass:"line-number"},[e._v("36")]),a("br"),a("span",{staticClass:"line-number"},[e._v("37")]),a("br"),a("span",{staticClass:"line-number"},[e._v("38")]),a("br"),a("span",{staticClass:"line-number"},[e._v("39")]),a("br"),a("span",{staticClass:"line-number"},[e._v("40")]),a("br"),a("span",{staticClass:"line-number"},[e._v("41")]),a("br"),a("span",{staticClass:"line-number"},[e._v("42")]),a("br"),a("span",{staticClass:"line-number"},[e._v("43")]),a("br"),a("span",{staticClass:"line-number"},[e._v("44")]),a("br"),a("span",{staticClass:"line-number"},[e._v("45")]),a("br"),a("span",{staticClass:"line-number"},[e._v("46")]),a("br"),a("span",{staticClass:"line-number"},[e._v("47")]),a("br"),a("span",{staticClass:"line-number"},[e._v("48")]),a("br"),a("span",{staticClass:"line-number"},[e._v("49")]),a("br"),a("span",{staticClass:"line-number"},[e._v("50")]),a("br"),a("span",{staticClass:"line-number"},[e._v("51")]),a("br"),a("span",{staticClass:"line-number"},[e._v("52")]),a("br"),a("span",{staticClass:"line-number"},[e._v("53")]),a("br"),a("span",{staticClass:"line-number"},[e._v("54")]),a("br"),a("span",{staticClass:"line-number"},[e._v("55")]),a("br"),a("span",{staticClass:"line-number"},[e._v("56")]),a("br"),a("span",{staticClass:"line-number"},[e._v("57")]),a("br"),a("span",{staticClass:"line-number"},[e._v("58")]),a("br"),a("span",{staticClass:"line-number"},[e._v("59")]),a("br"),a("span",{staticClass:"line-number"},[e._v("60")]),a("br"),a("span",{staticClass:"line-number"},[e._v("61")]),a("br"),a("span",{staticClass:"line-number"},[e._v("62")]),a("br"),a("span",{staticClass:"line-number"},[e._v("63")]),a("br"),a("span",{staticClass:"line-number"},[e._v("64")]),a("br")])]),a("hr"),e._v(" "),a("h3",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/creationix/nvm",target:"_blank",rel:"noopener noreferrer"}},[e._v("github: nvm"),a("OutboundLink")],1),a("br"),e._v(" "),a("a",{attrs:{href:"https://github.com/visionmedia/debug",target:"_blank",rel:"noopener noreferrer"}},[e._v("github: debug"),a("OutboundLink")],1),a("br"),e._v(" "),a("a",{attrs:{href:"https://github.com/webpack/webpack",target:"_blank",rel:"noopener noreferrer"}},[e._v("github: webpack"),a("OutboundLink")],1),a("br"),e._v(" "),a("a",{attrs:{href:"https://github.com/webpack/webpack-cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("github: webpack-cli"),a("OutboundLink")],1),a("br"),e._v(" "),a("a",{attrs:{href:"https://github.com/webpack/loader-runner",target:"_blank",rel:"noopener noreferrer"}},[e._v("github: loader-runner"),a("OutboundLink")],1),a("br"),e._v(" "),a("a",{attrs:{href:"https://github.com/babel/babel-loader",target:"_blank",rel:"noopener noreferrer"}},[e._v("github: babel-loader"),a("OutboundLink")],1),a("br"),e._v(" "),a("a",{attrs:{href:"https://github.com/babel/babel/tree/v7.1.2/packages/babel-core",target:"_blank",rel:"noopener noreferrer"}},[e._v("github: @babel/core"),a("OutboundLink")],1),a("br"),e._v(" "),a("a",{attrs:{href:"https://docs.npmjs.com/files/package.json#main",target:"_blank",rel:"noopener noreferrer"}},[e._v("package.json - main"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);